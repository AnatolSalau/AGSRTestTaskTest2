2024-06-10T11:02:51.842+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] c.e.r.ResourceServerApplication          : Starting ResourceServerApplication using Java 21.0.1 with PID 1368 (D:\JavaDevelop\Projects\AGSRTestTaskTest2\resource_server\build\classes\java\main started by RedmiBook in D:\JavaDevelop\Projects\AGSRTestTaskTest2)
2024-06-10T11:02:51.850+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] c.e.r.ResourceServerApplication          : No active profile set, falling back to 1 default profile: "default"
2024-06-10T11:02:52.842+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-06-10T11:02:52.885+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 37 ms. Found 1 JPA repository interface.
2024-06-10T11:02:53.549+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8083 (http)
2024-06-10T11:02:53.558+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2024-06-10T11:02:53.558+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.24]
2024-06-10T11:02:53.611+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2024-06-10T11:02:53.611+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1727 ms
2024-06-10T11:02:53.936+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2024-06-10T11:02:54.039+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3cad24ae
2024-06-10T11:02:54.040+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2024-06-10T11:02:54.087+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] n.l.s.preliquibase.PreLiquibase          : PreLiquibase: Executing SQL script : class path resource [db/preliquibase/create_schema.sql]
2024-06-10T11:02:54.312+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] liquibase.changelog                      : Creating database history table with name: res_sch.databasechangelog
2024-06-10T11:02:54.368+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] liquibase.changelog                      : Reading from res_sch.databasechangelog
2024-06-10T11:02:54.400+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] liquibase.lockservice                    : Successfully acquired change log lock
2024-06-10T11:02:54.401+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] liquibase.command                        : Using deploymentId: 8006574401
2024-06-10T11:02:54.402+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] liquibase.changelog                      : Reading from res_sch.databasechangelog
2024-06-10T11:02:54.406+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] liquibase.ui                             : Running Changeset: db/changelog/scripts/create_tables.sql::raw::includeAll
2024-06-10T11:02:54.421+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] liquibase.changelog                      : Custom SQL executed
2024-06-10T11:02:54.422+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] liquibase.changelog                      : ChangeSet db/changelog/scripts/create_tables.sql::raw::includeAll ran successfully in 16ms
2024-06-10T11:02:54.426+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] liquibase.ui                             : Running Changeset: db/changelog/scripts/insert_data.sql::raw::includeAll
2024-06-10T11:02:54.429+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] liquibase.changelog                      : Custom SQL executed
2024-06-10T11:02:54.430+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] liquibase.changelog                      : ChangeSet db/changelog/scripts/insert_data.sql::raw::includeAll ran successfully in 4ms
2024-06-10T11:02:54.434+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] liquibase.util                           : UPDATE SUMMARY
2024-06-10T11:02:54.435+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] liquibase.util                           : Run:                          2
2024-06-10T11:02:54.435+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] liquibase.util                           : Previously run:               0
2024-06-10T11:02:54.435+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] liquibase.util                           : Filtered out:                 0
2024-06-10T11:02:54.435+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] liquibase.util                           : -------------------------------
2024-06-10T11:02:54.435+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] liquibase.util                           : Total change sets:            2
2024-06-10T11:02:54.435+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] liquibase.util                           : Update summary generated
2024-06-10T11:02:54.437+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] liquibase.command                        : Update command completed successfully.
2024-06-10T11:02:54.437+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] liquibase.ui                             : Liquibase: Update has been successful. Rows affected: 4
2024-06-10T11:02:54.439+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] liquibase.lockservice                    : Successfully released change log lock
2024-06-10T11:02:54.439+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] liquibase.command                        : Command execution complete
2024-06-10T11:02:54.504+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2024-06-10T11:02:54.543+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2024-06-10T11:02:54.568+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2024-06-10T11:02:54.742+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2024-06-10T11:02:55.359+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2024-06-10T11:02:55.399+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-06-10T11:02:55.881+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoints beneath base path '/actuator'
2024-06-10T11:02:55.929+03:00  WARN 1368 --- [ResourceServer_AGSR_TestTask] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-06-10T11:02:56.051+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [main] eGlobalAuthenticationAutowiredConfigurer : Eagerly initializing {org.springframework.boot.autoconfigure.security.servlet.SpringBootWebSecurityConfiguration$WebSecurityEnablerConfiguration=org.springframework.boot.autoconfigure.security.servlet.SpringBootWebSecurityConfiguration$WebSecurityEnablerConfiguration@2542e124}
2024-06-10T11:02:56.053+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [main] swordEncoderAuthenticationManagerBuilder : No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2024-06-10T11:02:56.610+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]
2024-06-10T11:02:57.059+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8083 (http) with context path '/'
2024-06-10T11:02:57.070+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [main] c.e.r.ResourceServerApplication          : Started ResourceServerApplication in 5.593 seconds (process running for 6.289)
2024-06-10T11:03:02.030+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-06-10T11:03:02.030+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2024-06-10T11:03:02.031+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2024-06-10T11:03:02.044+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.045+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.046+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.048+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.049+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.050+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.051+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.051+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.051+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.053+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.133+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.133+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.134+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.135+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.135+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.135+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.135+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.136+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.136+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.136+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.137+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.138+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.138+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.139+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.185+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.195+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.220+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.241+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.278+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.286+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.286+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.287+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.287+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.287+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.287+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.287+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.287+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.287+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.287+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.289+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.289+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.289+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.289+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.290+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.290+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.290+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.290+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.290+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.290+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.290+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.290+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.290+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.290+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.292+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.292+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.293+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.293+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.295+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.301+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.301+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.302+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.302+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.302+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.302+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.302+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.302+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.302+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.302+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.304+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.304+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.304+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.304+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.304+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.304+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.304+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.304+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.304+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.305+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.305+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.305+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.305+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.305+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.307+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.307+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.308+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.308+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.310+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.317+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.317+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.317+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.318+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.318+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.318+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.318+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.318+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.318+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.318+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.320+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.320+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.320+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.320+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.320+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.320+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.320+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.320+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.320+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.320+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.320+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.320+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.320+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.321+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.322+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.323+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.323+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.324+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.326+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.333+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.333+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.333+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.333+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.333+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.334+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.334+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.334+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.334+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.334+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.335+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.335+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.335+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.335+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.336+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.336+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.336+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.336+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.336+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.336+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.336+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.336+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.336+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.336+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.337+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.338+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.339+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.339+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.342+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.349+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.349+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.349+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.350+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.350+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.350+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.350+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.350+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.350+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.350+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.351+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.351+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.351+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.352+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.352+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.352+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.352+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.352+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.352+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.352+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.352+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.352+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.352+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.352+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.354+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.354+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.355+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.355+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.357+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.365+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.365+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.365+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.365+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.365+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.365+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.365+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.366+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.366+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.366+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.367+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.367+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.367+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.367+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.367+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.367+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.367+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.367+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.367+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.368+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.368+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.368+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.368+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.368+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.369+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.370+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.370+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.371+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.373+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.381+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.382+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.382+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.382+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.382+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.382+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.382+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.382+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.382+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.383+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.384+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.384+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.384+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.384+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.384+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.384+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.384+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.384+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.384+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.384+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.384+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.385+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.385+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.385+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.386+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.386+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.387+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.387+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.390+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.397+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.397+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.397+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.397+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.397+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.398+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.398+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.398+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.398+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.398+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.399+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.399+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.399+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.399+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.399+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.399+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.399+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.399+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.400+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.400+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.400+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.400+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.400+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.400+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.401+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.401+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.402+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.402+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.405+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.413+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.413+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.413+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.413+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.414+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.414+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.414+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.414+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.414+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.414+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.415+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.415+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.415+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.415+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.415+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.416+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.416+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.416+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.416+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.416+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.416+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.416+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.416+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.416+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.417+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.418+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.418+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.419+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.421+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.429+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.429+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.429+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.429+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.429+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.429+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.429+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.429+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.430+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.430+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.431+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.431+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.431+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.431+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.431+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.431+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.431+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.431+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.431+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.431+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.431+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.431+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.431+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.431+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.433+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.433+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.434+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.434+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.436+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.444+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.444+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.444+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.445+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.445+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.445+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.445+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.445+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.445+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.445+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.446+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.446+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.446+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.446+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.446+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.447+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.447+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.447+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.447+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.447+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.447+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.447+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.447+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.447+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.449+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.449+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.450+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.450+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.452+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.460+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.460+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.460+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.460+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.460+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.460+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.461+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.461+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.461+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.461+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.462+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.462+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.462+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.462+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.462+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.462+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.462+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.462+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.462+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.462+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.462+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.462+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.462+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.463+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.464+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.464+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.465+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.465+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.467+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.476+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.476+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.476+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.476+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.476+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.476+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.476+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.476+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.476+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.477+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.478+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.478+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.478+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.478+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.478+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.478+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.478+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.478+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.478+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.478+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.478+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.478+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.478+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.479+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.480+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.480+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.481+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.481+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.483+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.492+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.493+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.493+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.493+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.493+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.493+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.493+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.493+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.493+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.493+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.494+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.495+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.495+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.495+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.495+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.495+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.495+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.495+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.495+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.495+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.495+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.495+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.495+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.495+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.496+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.497+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.497+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.498+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.500+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.508+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.508+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.508+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.508+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.508+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.508+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.508+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.508+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.508+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.509+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.510+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.510+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.510+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.510+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.510+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.510+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.510+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.510+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.510+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.510+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.510+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.510+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.510+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.510+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.512+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.512+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.513+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.513+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.515+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.524+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.524+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.524+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.524+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.524+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.524+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.524+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.524+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.524+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.525+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.525+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.525+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.525+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.526+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.526+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.526+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.526+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.526+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.526+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.526+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.526+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.526+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.526+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.526+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.527+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.527+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.528+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.528+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.531+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.540+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.540+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.540+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.540+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.540+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.540+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.540+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.540+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.540+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.540+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.541+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.541+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.541+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.541+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.542+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.542+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.542+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.542+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.542+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.542+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.542+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.542+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.542+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.542+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.543+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.543+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.544+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.544+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.546+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.556+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.556+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.556+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.556+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.556+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.556+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.556+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.556+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.556+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.557+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.557+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.558+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.558+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.558+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.558+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.558+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.558+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.558+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.558+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.558+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.558+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.558+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.558+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.558+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.560+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.560+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.561+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.561+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.564+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.571+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.571+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.571+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.571+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.571+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.571+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.571+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.571+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.571+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.571+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.572+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.572+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.573+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.573+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.573+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.573+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.573+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.573+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.573+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.573+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.573+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.573+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.573+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.573+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.574+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.575+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.575+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.575+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.578+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.587+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.587+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.587+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.587+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.587+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.587+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.587+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.587+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.587+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.587+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.588+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.588+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.588+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.588+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.589+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.589+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.589+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.589+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.589+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.589+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.589+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.589+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.589+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.589+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.590+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.590+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.591+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.591+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.594+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.603+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.603+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.604+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.604+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.604+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.604+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.604+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.604+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.604+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.604+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.605+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.605+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.605+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.606+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.606+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.606+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.606+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.606+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.606+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.606+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.606+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.606+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.606+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.606+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.608+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.608+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.609+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.610+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.613+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.619+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.619+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.619+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.619+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.619+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.619+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.619+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.619+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.619+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.619+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.620+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.620+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.620+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.620+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.620+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.620+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.620+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.620+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.620+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.620+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.620+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.621+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.621+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.621+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.622+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.622+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.623+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.623+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.625+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.635+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.635+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.635+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.635+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.635+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.635+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.635+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.635+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.635+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.636+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.637+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.637+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.637+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.637+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.637+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.637+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.637+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.637+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.637+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.637+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.637+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.637+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.637+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.637+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.639+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.639+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.640+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.640+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.642+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.651+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.651+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.651+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.651+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.651+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.651+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.651+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.651+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.651+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.651+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.652+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.652+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.652+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.653+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.653+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.653+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.653+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.653+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.653+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.653+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.653+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.653+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.653+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.653+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.654+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.654+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.655+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.655+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.658+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.667+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.667+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.667+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.668+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.668+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.668+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.668+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.668+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.668+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.668+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.669+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.669+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.669+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.669+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.669+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.669+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.669+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.669+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.669+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.669+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.669+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.669+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.669+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.669+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.671+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.671+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.672+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.672+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.674+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.683+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.683+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.683+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.683+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.683+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.683+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.683+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.683+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.683+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.684+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.684+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.684+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.684+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.685+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.685+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.685+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.685+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.685+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.685+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.685+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.685+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.685+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.685+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.685+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.686+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.687+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.687+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.688+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.689+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.698+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.698+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.698+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.698+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.699+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.699+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.699+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.699+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.699+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.699+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.700+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.700+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.700+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.700+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.700+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.700+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.700+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.700+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.700+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.700+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.700+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.700+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.700+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.700+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.701+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.701+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.702+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.702+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.704+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.714+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.714+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.714+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.714+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.714+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.714+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.714+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.714+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.714+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.715+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.715+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.715+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.715+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.716+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.716+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.716+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.716+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.716+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.716+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.716+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.716+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.716+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.716+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.716+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.717+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.717+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.718+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.719+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.721+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.729+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.729+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.729+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.729+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.729+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.729+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.729+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.729+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.729+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.729+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.730+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.730+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.730+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.730+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.730+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.730+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.730+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.730+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.730+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.730+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.730+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.730+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.730+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.730+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.731+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.731+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.732+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.732+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.734+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.745+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.745+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.745+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.746+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.746+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.746+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.746+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.746+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.746+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.746+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.747+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.747+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.747+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.747+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.747+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.747+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.747+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.747+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.747+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.747+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.747+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.747+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.747+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.747+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.748+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.748+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.749+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.749+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.751+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.760+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.760+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.760+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.760+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.760+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.760+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.760+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.760+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.760+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.760+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.761+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.761+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.761+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.761+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.761+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.761+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.761+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.761+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.761+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.761+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.762+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.762+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.762+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.762+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.763+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.763+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.764+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.765+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.767+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.776+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.776+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.776+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.776+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.776+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.776+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.776+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.776+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.776+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.776+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.777+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.777+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.777+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.777+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.777+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.777+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.777+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.777+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.777+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.777+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.777+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.777+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.777+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.777+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.779+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.779+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.779+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.780+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.782+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.792+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.792+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.792+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.792+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.792+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.792+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.792+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.792+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.792+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.792+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.793+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.793+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.793+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.793+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.793+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.793+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.793+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.793+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.793+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.793+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.793+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.793+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.793+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.794+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.795+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.795+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.795+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.796+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.798+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.808+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.808+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.808+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.808+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.808+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.808+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.808+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.808+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.808+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.808+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.809+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.809+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.809+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.809+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.809+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.809+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.809+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.809+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.809+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.809+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.809+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.809+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.809+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.810+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.811+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.811+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.812+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.813+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.817+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.825+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.825+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.825+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.825+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.828+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.828+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.828+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.828+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.828+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.829+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.830+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.830+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.830+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.830+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.830+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.830+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.830+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.830+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.830+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.830+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.830+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.831+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.831+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.831+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.832+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.832+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.833+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.834+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.836+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.855+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.856+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.856+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.856+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.856+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.856+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.856+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.856+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.856+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.856+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.857+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.857+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.857+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.857+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.857+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.857+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.857+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.857+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.857+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.857+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.858+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.858+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.858+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.858+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.859+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.859+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.860+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.860+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.863+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.871+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.871+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.871+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.871+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.871+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.871+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.871+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.871+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.871+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.871+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.872+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.872+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.872+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.872+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.872+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.872+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.872+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.872+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.872+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.872+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.872+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.872+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.872+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.872+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.873+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.874+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.874+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.875+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.877+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.887+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.887+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.887+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.887+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.887+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.887+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.887+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.887+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.887+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.887+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.888+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.888+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.888+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.888+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.888+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.888+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.888+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.888+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.888+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.888+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.888+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.888+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.889+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.889+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.890+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.890+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.890+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.891+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.893+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.902+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.902+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.902+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.902+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.902+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.902+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.902+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.902+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.902+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.902+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.903+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.903+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.903+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.903+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.903+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.903+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.903+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.903+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.903+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.903+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.903+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.904+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.904+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.904+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.905+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.905+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.905+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.906+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.908+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.918+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.918+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.918+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.918+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.918+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.918+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.918+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.918+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.918+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.918+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.919+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.919+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.919+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.919+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.919+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.919+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.919+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.919+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.919+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.919+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.919+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.919+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.920+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.920+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.921+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.921+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.921+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.922+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.924+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.933+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.933+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.933+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.933+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.933+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.933+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.933+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.933+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.933+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.933+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.934+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.934+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.934+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.934+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.934+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.934+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.934+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.934+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.934+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.934+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.934+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.934+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.934+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.934+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.935+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.936+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.936+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.936+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.938+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.948+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.948+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.948+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.948+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.948+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.948+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.948+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.948+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.948+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.954+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.955+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.955+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.956+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.956+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.956+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.956+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.956+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.956+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.956+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.956+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.956+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.956+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.956+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.956+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.958+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.959+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.960+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.960+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.963+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.980+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.981+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.981+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.981+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.981+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.981+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.981+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.981+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.981+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.981+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.982+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.982+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.982+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.982+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.982+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.982+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.982+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.982+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.983+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.983+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.983+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.983+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.983+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.983+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.984+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.985+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.985+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.985+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.988+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:02.995+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:02.996+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:02.996+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:02.996+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:02.996+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:02.996+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:02.996+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:02.996+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:02.996+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:02.996+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:02.997+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:02.997+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:02.997+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:02.997+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.997+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:02.997+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:02.997+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:02.997+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:02.997+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:02.997+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:02.997+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:02.997+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:02.997+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:02.997+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:02.998+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.998+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:02.999+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:02.999+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.001+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.013+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.013+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.013+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.013+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.013+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.013+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.013+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.013+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.013+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.013+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.014+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.014+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.014+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.014+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.014+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.014+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.014+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.014+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.014+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.014+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.014+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.014+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.014+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.014+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.015+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.016+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.016+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.016+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.018+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.028+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.028+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.028+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.028+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.028+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.028+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.028+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.029+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.029+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.029+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.029+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.029+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.029+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.030+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.030+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.030+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.030+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.030+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.030+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.030+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.030+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.030+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.030+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.030+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.031+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.031+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.031+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.032+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.034+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.044+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.044+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.044+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.044+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.044+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.044+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.044+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.044+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.044+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.045+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.045+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.045+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.045+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.045+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.045+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.045+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.045+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.045+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.046+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.046+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.046+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.046+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.046+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.046+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.047+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.047+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.047+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.048+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.049+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.059+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.059+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.059+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.059+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.059+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.059+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.059+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.059+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.059+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.060+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.060+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.060+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.060+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.060+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.060+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.060+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.060+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.061+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.061+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.061+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.061+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.061+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.061+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.061+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.062+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.062+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.062+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.063+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.065+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.074+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.074+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.074+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.074+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.074+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.074+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.074+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.074+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.074+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.074+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.075+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.075+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.075+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.075+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.075+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.075+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.075+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.075+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.075+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.075+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.075+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.075+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.075+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.076+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.077+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.077+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.077+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.078+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.080+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.090+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.090+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.090+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.090+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.090+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.090+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.090+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.090+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.090+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.090+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.091+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.091+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.091+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.091+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.091+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.091+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.091+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.091+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.091+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.091+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.092+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.092+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.092+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.092+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.093+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.093+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.093+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.094+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.096+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.106+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.106+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.106+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.106+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.107+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.107+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.107+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.107+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.107+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.107+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.108+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.108+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.108+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.108+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.108+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.108+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.108+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.108+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.108+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.108+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.108+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.108+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.108+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.108+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.109+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.109+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.110+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.110+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.113+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.121+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.122+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.122+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.122+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.122+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.122+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.122+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.122+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.122+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.122+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.123+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.123+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.123+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.123+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.123+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.123+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.123+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.123+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.123+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.123+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.123+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.123+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.123+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.123+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.124+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.124+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.125+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.125+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.126+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.136+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.136+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.137+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.137+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.137+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.137+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.137+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.137+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.137+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.137+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.138+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.138+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.138+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.138+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.138+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.138+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.138+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.138+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.138+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.138+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.138+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.138+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.138+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.138+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.139+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.139+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.139+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.140+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.141+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.152+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.152+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.152+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.153+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.153+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.153+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.153+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.153+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.153+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.153+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.153+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.154+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.154+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.154+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.154+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.154+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.154+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.154+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.154+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.154+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.154+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.154+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.154+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.154+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.155+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.155+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.155+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.156+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.157+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.167+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.168+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.168+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.168+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.168+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.168+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.168+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.168+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.168+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.168+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.169+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.169+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.169+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.169+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.169+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.169+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.169+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.169+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.169+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.169+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.169+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.169+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.169+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.169+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.170+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.170+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.171+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.171+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.173+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.184+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.184+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.184+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.184+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.184+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.184+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.184+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.184+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.184+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.184+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.185+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.185+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.185+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.185+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.185+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.185+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.185+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.185+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.185+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.185+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.185+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.185+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.185+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.185+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.186+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.186+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.187+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.187+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.189+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.199+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.199+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.199+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.199+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.199+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.199+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.199+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.199+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.199+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.199+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.200+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.200+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.200+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.200+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.200+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.200+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.200+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.200+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.200+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.200+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.200+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.200+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.200+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.200+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.201+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.201+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.202+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.202+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.204+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.215+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.215+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.215+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.215+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.215+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.215+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.215+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.215+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.215+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.215+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.216+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.216+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.216+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.216+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.216+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.216+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.216+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.216+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.216+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.216+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.216+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.216+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.216+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.216+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.217+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.217+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.218+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.218+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.220+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.230+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.230+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.230+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.230+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.230+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.230+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.230+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.230+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.230+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.230+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.231+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.231+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.231+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.231+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.231+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.231+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.231+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.231+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.231+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.231+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.231+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.231+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.231+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.231+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.232+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.232+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.233+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.233+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.235+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.244+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.245+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.245+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.245+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.245+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.245+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.245+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.245+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.245+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.245+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.246+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.246+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.246+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.246+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.246+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.246+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.246+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.246+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.246+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.246+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.246+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.246+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.246+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.246+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.247+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.247+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.248+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.248+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.250+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.259+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.260+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.260+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.260+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.260+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.260+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.260+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.260+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.260+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.260+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.261+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.261+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.261+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.261+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.261+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.261+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.261+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.261+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.261+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.261+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.261+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.261+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.261+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.261+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.262+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.262+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.263+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.263+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.265+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.276+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.276+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.276+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.276+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.276+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.276+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.276+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.276+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.276+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.276+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.277+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.277+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.277+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.277+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.277+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.277+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.277+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.277+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.277+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.277+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.277+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.277+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.277+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.277+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.278+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.278+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.279+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.279+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.281+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.292+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.292+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.292+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.292+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.292+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.293+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.293+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.293+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.293+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.293+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.294+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.294+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.294+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.294+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.294+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.294+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.294+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.294+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.294+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.294+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.294+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.294+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.294+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.294+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.296+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.296+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.297+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.298+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.302+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.308+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.308+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.308+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.308+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.308+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.309+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.309+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.309+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.309+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.309+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.310+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.310+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.310+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.310+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.310+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.310+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.310+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.310+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.310+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.310+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.310+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.310+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.310+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.310+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.311+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.312+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.312+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.312+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.315+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.324+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.324+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.324+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.324+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.324+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.324+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.324+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.324+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.324+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.324+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.325+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.325+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.325+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.325+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.325+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.325+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.325+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.325+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.325+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.325+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.325+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.325+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.325+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.325+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.326+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.326+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.327+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.327+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.329+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.340+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.340+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.340+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.340+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.340+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.340+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.340+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.340+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.340+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.340+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.341+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.341+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.341+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.341+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.341+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.341+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.341+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.341+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.341+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.341+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.341+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.341+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.341+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.341+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.342+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.342+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.343+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.343+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.345+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.356+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.356+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.356+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.356+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.356+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.356+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.356+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.356+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.356+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.357+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.357+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.357+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.357+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.357+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.357+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.357+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.357+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.357+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.358+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.358+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.358+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.358+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.358+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.358+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.359+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.359+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.359+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.360+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.362+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.371+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.371+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.371+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.371+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.371+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.371+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.371+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.371+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.371+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.371+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.372+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.372+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.372+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.372+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.372+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.372+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.372+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.372+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.372+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.372+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.372+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.372+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.372+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.372+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.373+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.373+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.374+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.374+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.376+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.387+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.387+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.387+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.387+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.387+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.387+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.387+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.387+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.387+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.387+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.388+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.388+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.388+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.388+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.388+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.388+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.388+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.388+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.388+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.388+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.388+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.388+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.388+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.388+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.389+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.390+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.390+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.391+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.393+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.403+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.403+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.403+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.403+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.403+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.403+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.403+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.403+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.403+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.403+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.404+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.404+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.404+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.404+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.404+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.404+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.404+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.404+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.404+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.404+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.404+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.404+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.404+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.404+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.405+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.406+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.406+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.407+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.409+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.418+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.418+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.418+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.418+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.418+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.418+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.418+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.418+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.418+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.419+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.420+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.420+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.420+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.420+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.420+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.420+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.420+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.420+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.420+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.420+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.420+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.420+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.420+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.420+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.421+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.422+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.422+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.423+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.425+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.433+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.433+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.433+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.433+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.433+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.433+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.433+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.433+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.433+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.433+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.434+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.434+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.434+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.434+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.435+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.435+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.435+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.435+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.435+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.435+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.435+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.435+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.435+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.435+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.436+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.436+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.437+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.437+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.439+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.449+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.449+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.449+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.449+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.449+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.449+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.449+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.449+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.449+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.449+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.450+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.450+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.450+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.450+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.450+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.450+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.450+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.450+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.450+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.451+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.451+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.451+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.451+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.451+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.452+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.452+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.453+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.453+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.455+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.465+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.465+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.465+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.465+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.465+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.465+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.465+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.465+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.465+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.465+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.466+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.466+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.466+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.466+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.466+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.466+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.466+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.466+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.466+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.466+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.466+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.466+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.466+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.466+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.467+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.468+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.468+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.468+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.470+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.481+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.481+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.481+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.481+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.482+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.482+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.482+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.482+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.482+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.482+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.483+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.483+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.483+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.483+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.483+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.483+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.483+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.483+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.483+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.483+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.483+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.483+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.483+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.483+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.484+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.484+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.485+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.485+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.487+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.498+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.498+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.498+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.498+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.498+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.499+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.499+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.499+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.499+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.499+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.500+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.500+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.500+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.500+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.501+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.505+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.505+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.505+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.506+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.506+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.506+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.506+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.506+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.506+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.507+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.507+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.508+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.508+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.510+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.528+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.528+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.528+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.528+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.528+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.528+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.528+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.528+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.528+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.528+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.529+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.529+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.529+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.529+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.529+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.529+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.529+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.529+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.529+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.529+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.529+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.529+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.529+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.530+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.531+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.531+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.531+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.532+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.534+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.544+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.544+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.544+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.544+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.544+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.544+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.544+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.544+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.544+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.544+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.545+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.545+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.545+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.545+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.545+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.545+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.545+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.545+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.545+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.545+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.545+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.545+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.545+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.545+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.546+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.547+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.547+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.547+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.549+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.558+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.559+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.559+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.559+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.559+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.559+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.559+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.559+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.559+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.559+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.560+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.560+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.560+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.560+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.560+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.560+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.560+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.560+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.560+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.560+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.560+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.560+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.560+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.560+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.561+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.561+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.562+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.562+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.564+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.575+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.575+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.575+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.575+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.575+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.575+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.575+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.575+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.575+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.575+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.576+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.576+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.576+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.576+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.576+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.576+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.576+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.576+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.576+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.576+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.576+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.576+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.576+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.576+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.577+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.577+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.578+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.578+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.580+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.591+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.591+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.591+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.591+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.591+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.591+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.591+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.591+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.591+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.591+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.592+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.592+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.592+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.592+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.592+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.592+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.592+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.592+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.592+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.592+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.592+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.592+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.592+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.593+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.594+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.594+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.594+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.594+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.596+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.607+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.607+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.607+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.607+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.607+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.607+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.607+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.607+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.607+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.607+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.608+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.608+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.608+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.608+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.608+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.608+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.608+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.608+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.608+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.608+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.608+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.608+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.608+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.608+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.609+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.609+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.610+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.610+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.612+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.623+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.623+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.623+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.623+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.623+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.623+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.623+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.623+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.623+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.623+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.624+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.624+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.624+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.624+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.624+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.624+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.624+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.624+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.624+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.624+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.624+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.624+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.624+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.625+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.626+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.626+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.626+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.627+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.629+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.639+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.639+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.639+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.639+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.639+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.639+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.639+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.639+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.639+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.639+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.640+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.640+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.640+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.640+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.640+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.640+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.641+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.641+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.641+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.641+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.641+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.641+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.641+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.641+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.642+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.642+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.643+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.643+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.645+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.656+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.656+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.656+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.656+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.656+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.656+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.656+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.656+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.656+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.656+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.658+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.658+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.658+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.658+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.658+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.658+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.658+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.658+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.658+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.658+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.658+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.658+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.658+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.658+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.660+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.661+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.662+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.662+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.665+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.671+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.671+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.671+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.671+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.671+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.671+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.671+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.671+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.671+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.671+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.672+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.672+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.672+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.672+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.672+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.672+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.672+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.672+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.672+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.672+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.672+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.672+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.672+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.672+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.673+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.674+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.674+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.675+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.677+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.687+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.687+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.687+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.687+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.687+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.687+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.687+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.687+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.687+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.687+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.688+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.688+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.688+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.688+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.688+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.688+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.688+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.688+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.688+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.688+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.688+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.688+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.688+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.688+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.689+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.689+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.690+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.690+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.692+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.703+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.703+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.703+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.703+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.703+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.703+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.703+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.703+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.703+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.703+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.704+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.704+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.704+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.704+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.704+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.704+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.704+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.704+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.704+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.704+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.704+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.704+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.704+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.704+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.705+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.706+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.706+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.706+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.708+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.718+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.718+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.718+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.718+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.718+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.718+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.718+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.718+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.718+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.719+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.719+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.719+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.719+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.719+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.719+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.719+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.719+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.719+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.720+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.720+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.720+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.720+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.720+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.720+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.721+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.721+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.722+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.722+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.724+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.734+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.734+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.734+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.734+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.734+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.734+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.734+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.734+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.734+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.734+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.735+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.735+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.735+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.735+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.735+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.735+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.735+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.735+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.735+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.735+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.735+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.735+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.735+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.735+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.736+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.737+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.737+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.737+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.739+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.750+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.750+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.750+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.750+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.750+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.750+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.750+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.750+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.750+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.750+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.751+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.751+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.751+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.751+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.751+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.751+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.751+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.751+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.751+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.751+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.752+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.752+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.752+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.752+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.753+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.753+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.753+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.754+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.756+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-2] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.766+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.766+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.766+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.766+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.766+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.766+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.766+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.766+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.766+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.766+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.767+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.767+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.767+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.767+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.767+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.767+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.767+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.767+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.767+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.767+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.767+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.767+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.767+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.768+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.768+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.769+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.769+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.769+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.771+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-3] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.782+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.782+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.782+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.782+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.782+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.782+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.782+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.782+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.782+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.782+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.783+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.783+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.783+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.783+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.783+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.783+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.783+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.783+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.783+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.783+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.783+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.783+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.783+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.783+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.784+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.784+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.785+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.785+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.787+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-4] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.798+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.798+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.798+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.798+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.798+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.798+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.798+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.798+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.798+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.798+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.799+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.799+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.799+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.799+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.799+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.799+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.799+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.799+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.799+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.799+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.799+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.799+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.799+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.799+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.800+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.801+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.801+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.801+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.803+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-5] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.814+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.814+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.814+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.814+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.814+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.814+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.814+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.814+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.814+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.814+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.815+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.815+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.815+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.815+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.815+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.815+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.815+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.815+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.815+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.815+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.815+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.815+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.815+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.816+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.817+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.817+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.817+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.818+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.820+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-6] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.830+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.830+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.830+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.830+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.830+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.830+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.830+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.830+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.830+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.830+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.831+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.831+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.831+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.831+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.831+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.831+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.831+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.831+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.831+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.831+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.831+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.831+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.831+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.831+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.832+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.832+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.833+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.833+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.835+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-7] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.845+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.845+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.845+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.845+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.845+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.845+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.845+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.845+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.845+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.845+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.846+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.846+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.846+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.846+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.846+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.846+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.846+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.846+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.846+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.846+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.846+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.846+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.847+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.847+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.848+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.848+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.848+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.849+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.851+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-8] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.861+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.861+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.861+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.861+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.861+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.861+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.861+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.861+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.861+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.861+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.862+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.862+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.862+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.862+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.862+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.862+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.862+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.862+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.862+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.862+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.862+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.862+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.862+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.862+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.863+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.863+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.864+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.864+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.866+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-9] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:03:03.877+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@404d90c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4bd1541f, org.springframework.security.web.context.SecurityContextHolderFilter@4eef2522, org.springframework.security.web.header.HeaderWriterFilter@6a7c0932, org.springframework.security.web.authentication.logout.LogoutFilter@682bff78, org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter@3a571d3e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6f34d178, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5808573f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@78f18a87, org.springframework.security.web.access.ExceptionTranslationFilter@6245303e, org.springframework.security.web.access.intercept.AuthorizationFilter@6b4133d0]] (1/1)
2024-06-10T11:03:03.877+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/patients
2024-06-10T11:03:03.877+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/11)
2024-06-10T11:03:03.877+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/11)
2024-06-10T11:03:03.877+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/11)
2024-06-10T11:03:03.877+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/11)
2024-06-10T11:03:03.877+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/11)
2024-06-10T11:03:03.877+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/logout', GET], Ant [pattern='/logout', POST], Ant [pattern='/logout', PUT], Ant [pattern='/logout', DELETE]]
2024-06-10T11:03:03.877+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking BearerTokenAuthenticationFilter (6/11)
2024-06-10T11:03:03.877+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.authentication.ProviderManager     : Authenticating request with JwtAuthenticationProvider (1/2)
2024-06-10T11:03:03.878+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim scope
2024-06-10T11:03:03.878+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] s.o.s.r.a.JwtGrantedAuthoritiesConverter : Looking for scopes in claim roles
2024-06-10T11:03:03.878+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.o.s.r.a.JwtAuthenticationProvider  : Authenticated token
2024-06-10T11:03:03.878+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] .s.r.w.a.BearerTokenAuthenticationFilter : Set SecurityContextHolder to JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.878+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/11)
2024-06-10T11:03:03.878+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.s.HttpSessionRequestCache        : matchingRequestParameterName is required for getMatchingRequest to lookup a value, but not provided
2024-06-10T11:03:03.878+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/11)
2024-06-10T11:03:03.878+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/11)
2024-06-10T11:03:03.878+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (10/11)
2024-06-10T11:03:03.878+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (11/11)
2024-06-10T11:03:03.878+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] estMatcherDelegatingAuthorizationManager : Authorizing POST /api/v1/patients
2024-06-10T11:03:03.878+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] estMatcherDelegatingAuthorizationManager : Checking authorization on POST /api/v1/patients using org.springframework.security.authorization.AuthenticatedAuthorizationManager@6606af6c
2024-06-10T11:03:03.878+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated JwtAuthenticationToken [Principal=org.springframework.security.oauth2.jwt.Jwt@10145e59, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[SCOPE_Practitioner, SCOPE_Patient.Write, SCOPE_Patient.Read, SCOPE_openid, SCOPE_roles, ROLE_Practitioner]]
2024-06-10T11:03:03.878+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.security.web.FilterChainProxy        : Secured POST /api/v1/patients
2024-06-10T11:03:03.879+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] horizationManagerBeforeMethodInterceptor : Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.879+03:00 DEBUG 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] horizationManagerBeforeMethodInterceptor : Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.example.resource_server.controller.PatientController.createPatient(com.example.resource_server.dto.PatientRequestDto); target is of class [com.example.resource_server.controller.PatientController]
2024-06-10T11:03:03.880+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.t.i.TransactionInterceptor           : Getting transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.880+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.t.i.TransactionInterceptor           : Completing transaction for [org.springframework.data.jpa.repository.support.SimpleJpaRepository.save]
2024-06-10T11:03:03.882+03:00 TRACE 1368 --- [ResourceServer_AGSR_TestTask] [http-nio-8083-exec-10] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2024-06-10T11:05:33.539+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-06-10T11:05:33.540+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2024-06-10T11:05:33.545+03:00  INFO 1368 --- [ResourceServer_AGSR_TestTask] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
